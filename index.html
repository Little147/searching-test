<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Library Search</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    /* สีแดงสำหรับ Tab เมนู */
    .nav-tabs .nav-link.active {
      background-color: #dc3545;
      color: white;
      font-weight: 600;
    }
    .nav-tabs .nav-link {
      color: #dc3545;
      font-weight: 500;
    }
    .nav-tabs .nav-link:hover {
      color: #b30000;
    }

    /* สีแดงสำหรับหัวข้อ */
    .text-primary {
      color: #dc3545 !important;
    }

    /* ปุ่มสีแดง */
    .btn-danger {
      background-color: #dc3545;
      border-color: #dc3545;
      font-weight: 600;
      transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
    }
    .btn-danger:hover,
    .btn-danger:focus {
      background-color: #b30000;
      border-color: #a10000;
    }

    /* ลิงก์สีแดง และ hover */
    a.text-danger,
    a.btn-link.text-danger {
      color: #dc3545;
      font-weight: 600;
      text-decoration: none;
      margin-right: 0.5rem;
      transition: color 0.2s ease-in-out;
    }
    a.text-danger:hover,
    a.btn-link.text-danger:hover {
      color: #b30000 !important;
      text-decoration: underline !important;
      cursor: pointer;
    }

    /* กรอบเหมือน single search */
    .search-box {
      border: 1px solid #dc3545;
      border-radius: 8px;
      padding: 1rem;
      background-color: rgba(255, 255, 255, 0.95);
    }

    /* ตั้งระยะห่างลิงก์ footer */
    .footer-links a:last-child {
      margin-right: 0;
    }
  </style>
</head>
<body>

<div class="container mt-5">
  <div class="card shadow rounded-4 p-4 bg-white bg-opacity-95">
    <!-- Tab Menu -->
    <ul class="nav nav-tabs justify-content-center mb-4" id="searchTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="tab1-tab"
          data-bs-toggle="tab"
          data-bs-target="#tab1"
          type="button"
          role="tab"
          aria-controls="tab1"
          aria-selected="false"
        >
          Search in Library
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link active"
          id="tab2-tab"
          data-bs-toggle="tab"
          data-bs-target="#tab2"
          type="button"
          role="tab"
          aria-controls="tab2"
          aria-selected="true"
        >
          SINGLE SEARCH
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="tab3-tab"
          data-bs-toggle="tab"
          data-bs-target="#tab3"
          type="button"
          role="tab"
          aria-controls="tab3"
          aria-selected="false"
        >
          PULINET Search
        </button>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="searchTabContent">
      <!-- Tab 1: Search in Library -->
      <div class="tab-pane fade" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
        <h4 class="mb-3 text-center text-primary">ค้นหาทรัพยากรในห้องสมุด</h4>
        <form action="https://search.library.mfu.ac.th/" method="get" target="_blank" class="search-box mx-auto" style="max-width: 700px;">
          <div class="row justify-content-center g-2 mb-3">
            <div class="col-md-3">
              <select name="search_field" class="form-select" aria-label="Search Field">
                <option value="keyword">Keyword</option>
                <option value="title">Title</option>
                <option value="author">Author</option>
              </select>
            </div>
            <div class="col-md-5">
              <input
                type="text"
                name="query"
                class="form-control"
                placeholder="ค้นหาหนังสือในห้องสมุด..."
                autocomplete="off"
                required
              />
            </div>
            <div class="col-md-2">
              <button type="submit" class="btn btn-danger w-100">
                <i class="fa-solid fa-magnifying-glass"></i> Search
              </button>
            </div>
          </div>
        </form>

        <!-- Extra Links -->
        <div class="text-center mt-3 footer-links">
          <a
            href="#"
            class="text-decoration-none me-2 btn btn-link text-danger"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="เครื่องมือสำหรับค้นหาหนังสือ วารสาร สื่อมัลติมีเดียและทรัพยากรต่าง ๆ ภายในห้องสมุด"
          >OPAC คืออะไร</a>
          <a href="https://search.library.mfu.ac.th/" target="_blank" class="btn btn-link text-danger me-3"
            >ไปที่ OPAC</a>
          <a href="https://journal-index.library.mfu.ac.th/" target="_blank" class="btn btn-link text-danger"
            >Thai Journals Indexing</a>
        </div>
      </div>

      <!-- Tab 2: SINGLE SEARCH -->
      <div class="tab-pane fade show active" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
        <div class="container mt-4 search-box" style="max-width: 700px;">
          <div class="card shadow-sm border-0">
            <div class="card-body p-3">
              <form action="https://search.ebscohost.com/login.aspx" onsubmit="getURL()" method="get" target="_blank">
                <!-- Search Input -->
                <div class="row mb-3">
                  <div class="col">
                    <input
                      id="searchterm"
                      class="form-control form-control-lg"
                      type="text"
                      name="bquery"
                      placeholder="Search Fulltext articles, eBook, eJournal, and library materials."
                      aria-label="Search term"
                      autocomplete="off"
                      required
                    />
                  </div>
                </div>

                <!-- Search Options -->
                <div class="row g-2 align-items-center">
                  <div class="col">
                    <select id="search-option" name="option" class="form-select" aria-label="Search option">
                      <option value="1">Keyword</option>
                      <option value="2">Title</option>
                      <option value="3">Author</option>
                    </select>

                    <!-- Hidden inputs -->
                    <input type="hidden" name="direct" value="true" />
                    <input type="hidden" name="scope" value="site" />
                    <input type="hidden" name="site" value="eds-live" />
                    <input type="hidden" name="authtype" value="ip,guest" />
                    <input type="hidden" name="custid" value="ns009084" />
                    <input type="hidden" name="groupid" value="main" />
                    <input type="hidden" id="profile" name="profile" value="eds" />
                    <input type="hidden" name="defaultdb" id="defaultdb" value="" />
                  </div>
                  <div class="col-auto">
                    <button type="submit" class="btn btn-danger" name="Submit">
                      <i class="fa-solid fa-magnifying-glass"></i> Search
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Footer -->
          <div class="mt-3 text-center footer-links">
            <a
              href="#"
              class="text-decoration-none me-2 btn btn-link text-danger"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              title="สืบค้นข้อมูลจากหลายฐานข้อมูลพร้อมกันในครั้งเดียว!"
              >Single Search คืออะไร</a
            >
            |
            <a
              href="http://search.ebscohost.com/login.aspx?authtype=ip,guest,uid&custid=ns009084&groupid=main&profile=eds"
              target="_blank"
              class="text-decoration-none ms-2 btn btn-link text-danger"
              >Single Search</a
            >
          </div>
        </div>
      </div>

      <!-- Tab 3: PULINET Search -->
      <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
        <h4 class="mb-3 text-center text-primary">ค้นหา PULINET</h4>

        <div class="search-form pulinet-search-form search-box mx-auto" style="max-width: 700px;">
          <form action="https://research.ebsco.com/c/fu23hs/search" onsubmit="getPulinetURL()" method="get" target="_blank">
            <div class="row g-2">
              <div class="col-12">
                <input
                  id="pulinet-searchterm"
                  class="form-control"
                  type="text"
                  name="bquery"
                  placeholder="Search books from libraries in PULINET."
                  autocomplete="off"
                  required
                />
              </div>
            </div>
            <div class="row g-2 align-items-end mt-2">
              <div class="col-md-6">
                <select id="pulinet-search-option" name="option" class="form-select">
                  <option id="KEY" value="1">Keyword</option>
                  <option id="TI" value="2">Title</option>
                  <option id="AU" value="3">Author</option>
                </select>

                <input name="direct" value="true" type="hidden" />
                <input name="scope" value="site" type="hidden" />
                <input name="site" value="eds-live" type="hidden" />
                <input name="authtype" value="ip,guest" type="hidden" />
                <input name="custid" value="ns009084" type="hidden" />
                <input name="groupid" value="main" type="hidden" />
                <input id="profile-pulinet" name="profile" value="ill" type="hidden" />
                <input type="hidden" name="defaultdb" id="defaultdb-pulinet" value="" />
              </div>
              <div class="col-auto">
                <input type="submit" name="Submit" value="Search" class="btn btn-danger" />
              </div>
            </div>
          </form>

          <div class="search-box-footer mt-3 text-center footer-links">
            <a
              href="#"
              class="text-decoration-none me-2 btn btn-link text-danger"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              title="ค้นหาทรัพยากรห้องสมุดของมหาวิทยาลัยในเครือข่ายความร่วมมือ PULINET"
              >Single Search คืออะไร</a
            >
            |
            <a
              href="https://search.ebscohost.com/login.aspx?authtype=ip,guest,uid&amp;custid=ns009084&amp;groupid=main&amp;profile=ill"
              target="_blank"
              class="text-decoration-none text-danger ms-2"
              >Go to PULINET Sharing</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Bundle for tabs & tooltip -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Function to update search term for SINGLE SEARCH form
  function getURL() {
    const optionSelect = document.getElementById("search-option");
    const optionText = optionSelect.options[optionSelect.selectedIndex].text;
    let searchStr = document.getElementById("searchterm").value.trim();
    const defaultdb = document.getElementById("defaultdb").value;
    const searchtermInput = document.getElementById("searchterm");
    const profileInput = document.getElementById("profile");

    if (optionText === "Title") {
      searchtermInput.value = `TI (${searchStr})`;
    } else if (optionText === "Author") {
      searchtermInput.value = `AU (${searchStr})`;
    }

    if (defaultdb === "JN") {
      searchtermInput.value = `((PT Academic Journal) OR (PT Journal Article)) AND (${searchtermInput.value})`;
    }

    if (defaultdb === "EJ") {
      profileInput.value = "ill";
    } else if (defaultdb === "JIN") {
      profileInput.value = "mfu";
    } else {
      profileInput.value = "eds";
    }
  }

  // Function to update search term for PULINET form
  function getPulinetURL() {
    var e = document.getElementById("pulinet-search-option");
    var text = e.options[e.selectedIndex].text;
    var input = document.getElementById("pulinet-searchterm");

    if (text === "Title") {
      input.value = `TI (${input.value})`;
    } else if (text === "Author") {
      input.value = `AU (${input.value})`;
    }

    var defaultdb = document.getElementById("defaultdb-pulinet").value;
    if (defaultdb === "JN") {
      input.value = `((PT Academic Journal) OR (PT Journal Article)) AND (${input.value})`;
    }

    var profile = "eds";
    if (defaultdb === "EJ") {
      profile = "ill";
    } else if (defaultdb === "JIN") {
      profile = "mfu";
    }

    document.getElementById("profile-pulinet").value = profile;
  }

  // Initialize tooltips
  document.addEventListener("DOMContentLoaded", function () {
    const tooltipTriggerList = Array.from(document.querySelectorAll("[data-bs-toggle='tooltip']"));
    tooltipTriggerList.forEach((el) => new bootstrap.Tooltip(el));
  });
</script>

</body>
</html>
